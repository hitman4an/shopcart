{"version":3,"sources":["add-product-form/index.js","add-product-form/add-product-form.js","product-list-item/index.js","product-list-item/product-list-item.js","product-list/index.js","product-list/product-list.js","App/App.js","serviceWorker.js","index.js"],"names":["addProductForm","state","label","quantity","price","summary","onQuantityChange","e","_this","setState","target","value","onLabelChange","setPrice","onAddItem","props","onItemAdded","onUndo","onUndoAction","onRedo","onRedoAction","react_default","a","createElement","className","onChange","this","type","min","max","onClick","Component","ProductListItem","QuantityChange","onProductChange","countSum","discount","DiscountChange","_this$props","name","onDeleted","cartDiscount","Fragment","disabled","ProductList","_ref","prods","elements","map","item","id","itemProps","Object","objectWithoutProperties","key","src_product_list_item","assign","newValue","propname","App","Id","productData","createItem","totalDiscount","historyIndex","stateHistory","addItem","newItem","i","concat","toConsumableArray","addHistoryItem","length","toggleProperty","TotalDiscountChange","isCartDiscount","forEach","deleteItem","_ref2","idx","findIndex","el","slice","undefined","push","arr","propName","_objectSpread2","oldItem","objectSpread","defineProperty","sum","reduce","result","_this$state","total","getTotal","console","log","src_add_product_form","width","src_product_list","align","window","print","Boolean","location","hostname","match","ReactDOM","render","src_App_App","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.c6cda285.chunk.js","sourcesContent":["import addProductForm from './add-product-form';\r\n\r\nexport default addProductForm;","import React, {Component} from 'react';\r\n\r\nimport './add-product-form.css';\r\n\r\nexport default class ProductAddForm extends Component {\r\n    \r\n    state = {\r\n        label: 'Smartphone',\r\n        quantity: 1,\r\n        price: 100, \r\n        summary: 100     \r\n        };\r\n    \r\n\r\n    onQuantityChange = (e) => {\r\n        this.setState({\r\n            quantity: e.target.value,\r\n            summary: e.target.value*this.state.quantity\r\n        })\r\n    };\r\n\r\n    onLabelChange = (e) => {\r\n        this.setState({\r\n            label: e.target.value,\r\n            price: this.setPrice(e.target.value),\r\n        })\r\n    };\r\n\r\n    setPrice = (label) => {\r\n        switch(label) {\r\n            case 'Smartphone': return 100\r\n            case 'Laptop': return 250\r\n            case 'Tablet PC': return 200\r\n            default : return 100\r\n        }\r\n    };\r\n\r\n\r\n\r\n    onAddItem = () => {\r\n        this.props.onItemAdded(this.state.label,\r\n                                this.state.quantity,\r\n                                this.state.price,\r\n                                this.state.summary\r\n                                );\r\n    };\r\n    \r\n    onUndo = () => {\r\n        this.props.onUndoAction();\r\n    }\r\n\r\n    onRedo = () => {\r\n        this.props.onRedoAction();\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    render() {\r\n\r\n        return (\r\n            <div className=\"form form-row\">\r\n                <div className=\"select form-group col-md-4\">\r\n                <select className=\"form-control\"\r\n                onChange={this.onLabelChange} \r\n                value={this.state.label}>\r\n                    <option>Smartphone</option>\r\n                    <option>Laptop</option>\r\n                    <option>Tablet PC</option>\r\n                </select>\r\n                </div>\r\n                <div className=\"form-group col-md-2 \">\r\n                <input type=\"number\" min=\"1\" max=\"100\" \r\n                    className=\"form-control\"\r\n                    onChange={this.onQuantityChange} \r\n                    value={this.state.quantity}>\r\n                </input>\r\n                </div>\r\n                \r\n                <div className=\"form-group col-md-2\">\r\n                <button className=\"btn btn-outline-secondary\"\r\n                onClick={this.onAddItem}>\r\n                Add product</button>\r\n                </div>\r\n                \r\n                <div className=\"form-group col-md\">\r\n                    \r\n                <button className=\"span btn btn-outline-primary float-right\"\r\n                onClick={this.onRedo}>\r\n                <i className=\"fa fa-mail-forward\" />\r\n                </button>\r\n                <button className=\"btn btn-outline-primary float-right\"\r\n                onClick={this.onUndo}>\r\n                <i className=\"fa fa-mail-reply\" />\r\n                </button>\r\n\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}","import ProductListItem from './product-list-item';\r\n\r\nexport default ProductListItem;","import React, {Component} from 'react';\r\n\r\nimport './product-list-item.css';\r\n\r\nexport default class ProductListItem extends Component {\r\n    \r\n    QuantityChange = (e) => {\r\n        this.props.onProductChange(e.target.value, \r\n            this.countSum(this.props.price,e.target.value,\r\n                this.props.discount), 'quantity');\r\n    };\r\n    \r\n\r\n    countSum(price,quantity,discount) {\r\n        return quantity*price - quantity*price*discount;\r\n    }\r\n        \r\n        DiscountChange = (e) => {\r\n                this.props.onProductChange(e.target.value, \r\n                    this.countSum(this.props.price,\r\n                        this.props.quantity, e.target.value), 'discount');\r\n        };\r\n    \r\n        \r\n   \r\n    render(){\r\n        \r\n        const {name, onDeleted, cartDiscount, price, quantity, summary, discount} = this.props;\r\n\r\n        return (\r\n            <>\r\n                <td>\r\n                    {name}\r\n                </td>\r\n                <td>\r\n                    <input className=\"form-control\" type=\"number\" min =\"1\" max=\"100\"\r\n                    value={quantity}  \r\n                    onChange={this.QuantityChange}> \r\n                    </input>\r\n                </td>\r\n                <td>\r\n                    {price}  \r\n                </td>\r\n                <td>\r\n                <select className=\"form-control form-control-select\"\r\n                onChange={this.DiscountChange} value={discount} \r\n                            disabled={cartDiscount}> \r\n                        <option value=\"0\">0%</option>\r\n                        <option value=\"0.1\">10%</option>\r\n                        <option value=\"0.25\">25%</option>\r\n                    </select>\r\n                </td>\r\n                <td className=\"summary\">\r\n                    {summary}\r\n                </td>\r\n                <td className=\"noprint\">\r\n                    <button type=\"button\"\r\n                        className=\"btn btn-outline-danger btn-sm float-right\"\r\n                        onClick={onDeleted}>\r\n                        <i className=\"fa fa-trash-o\" />\r\n                    </button>\r\n                </td>\r\n            </>\r\n        )\r\n    }\r\n}","import ProductList from './product-list';\r\n\r\nexport default ProductList;","import React from 'react';\r\n\r\nimport ProductListItem from '../product-list-item';\r\nimport './product-list.css';\r\n\r\nconst ProductList = ({prods, cartDiscount, onDeleted, \r\n    onProductChange}) => {\r\n        \r\n        const elements = prods.map((item) => {\r\n            let {id, ...itemProps} = item;\r\n\r\n        return (\r\n                <tr key={id}> \r\n                    <ProductListItem {...itemProps}\r\n                    onDeleted={() => onDeleted(id)}\r\n                    onProductChange = {(newValue, summary, propname ) => \r\n                        onProductChange(id, propname, newValue, summary)}\r\n                    cartDiscount = {cartDiscount}/>\r\n                </tr>             \r\n                    \r\n            );\r\n\r\n       });\r\n  \r\n    \r\n       return (<>{elements}</>);    \r\n   }\r\n\r\n   export default ProductList;\r\n","import React, { Component } from 'react';\n\nimport ProductAddForm from '../add-product-form';\nimport ProductList from '../product-list';\n\nimport './App.css';\n\nclass App extends Component {\n\n  Id = 1;\n\n  state = {\n    productData : [\n      this.createItem('Smartphone', \"1\", 100),\n      this.createItem('Tablet PC', \"1\", 200),\n      this.createItem('Laptop', \"1\", 250)\n    ],\n    totalDiscount: 0,\n    cartDiscount: false,\n    historyIndex: 0   \n  };\n\n  stateHistory = [this.state];\n  \n  addHistoryItem(i) {\n    if (this.stateHistory[i] === undefined)\n      this.stateHistory.push(this.state);\n    else {\n      this.stateHistory[i] = this.state;\n    }\n  }\n\n  createItem(name, quantity, price) {\n    return {\n      name,\n      quantity,\n      price,\n      summary: price*quantity,\n      discount: \"0\",\n      id: this.Id++ \n    };\n  };\n\n  addItem = (name, quantity, price) => {\n    const newItem = this.createItem(name, quantity, price);\n\n    let i = this.state.historyIndex;\n    i++;\n    \n    this.setState(({ productData })=> {\n\n      \n      const newArr = [...productData,\n                        newItem];\n      return { \n        productData: newArr,\n        historyIndex: i        \n      };\n    }, () => {\n      this.addHistoryItem(i); \n    });\n  }\n\n  onUndoAction = () => {\n\n      if (this.state.historyIndex !== 0) {\n\n        let i = this.state.historyIndex;\n        i--;\n        \n       \n       this.setState(() => {\n          \n          const newArray = this.stateHistory[i].productData;\n\n          return {           \n          \n          productData: newArray,\n          totalDiscount : this.stateHistory[i].totalDiscount,\n          cartDiscount: this.stateHistory[i].cartDiscount,\n          historyIndex : i\n         };\n        });\n     }\n    }\n\n    onRedoAction = () => {\n\n      if (this.state.historyIndex < this.stateHistory.length-1) {\n\n        let i = this.state.historyIndex;\n        i++;        \n       \n       this.setState(() => {\n          \n          const newArray = this.stateHistory[i].productData;\n\n          return {           \n          \n          productData: newArray,\n          totalDiscount : this.stateHistory[i].totalDiscount,\n          cartDiscount: this.stateHistory[i].cartDiscount,\n          historyIndex : i\n         };\n        });\n        \n      }\n    }\n\n    toggleProperty(arr, id, propName, newValue, summary){\n      \n      const idx = arr.findIndex((el) => el.id === id);\n        \n        const oldItem = arr[idx];\n        const newItem = {...oldItem, [propName]: newValue, summary: summary};\n        return [\n          ...arr.slice(0, idx),\n          newItem, \n          ...arr.slice(idx + 1)];        \n    };\n\n    onProductChange = (id, propname, newValue, summary) => {\n      let i = this.state.historyIndex;\n      i++;\n      this.setState({ \n          productData: this.toggleProperty(this.state.productData, id, \n            propname, newValue, summary),\n          historyIndex: i  \n                  \n        }, () => \n        {\n          this.addHistoryItem(i); \n        });                \n      };\n    \n    \n\n    TotalDiscountChange = (e) => {\n      this.setState({\n        totalDiscount: e.target.value,\n        cartDiscount: this.isCartDiscount(e.target.value),\n      }, () => {\n          if (this.state.cartDiscount) {\n            this.state.productData.forEach((item) => {\n              this.onProductChange(item.id,'discount','0', item.price*item.quantity)\n            })\n          }\n      });\n    }  \n     \n\n    deleteItem = (id) => {\n      this.setState(({productData}) => {\n        const idx = productData.findIndex((el) => el.id === id);\n\n        let i = this.state.historyIndex;\n        i++;\n  \n        const newArray = [\n          ...productData.slice(0, idx), \n          ...productData.slice(idx + 1)];\n          \n\n        return {\n          productData: newArray,\n          historyIndex: i\n       };\n      }, () => {\n        this.addHistoryItem();\n      });\n    };\n\n    getTotal (productData, totalDiscount) {\n      let sum = productData.reduce((result,value) => \n        result + value.summary, 0); \n      \n      if (totalDiscount !== 0) {\n        sum = sum - sum*totalDiscount;\n      } \n       \n     return sum;\n    }\n\n    isCartDiscount(totalDiscount) {\n      if (totalDiscount === \"0\") \n      {\n        return false \n      }\n      else\n      {\n        return true\n      }\n    };\n\n        \n\n  render() {\n\n    const {productData, cartDiscount, totalDiscount, historyIndex} = this.state;\n\n    const total = this.getTotal(productData, totalDiscount);\n\n    console.log('index ', historyIndex);\n    console.log('history:', this.stateHistory);\n\n    console.log(productData)\n    \n    return (\n      <div className=\"shopcart-app\">\n        <h1>Receipt</h1>\n        <div className=\"noprint\">\n          <ProductAddForm \n              onItemAdded={this.addItem}\n              onUndoAction={this.onUndoAction}\n              onRedoAction={this.onRedoAction}/>  \n        </div>\n      \n\n      <table className=\"table\">\n        <thead className=\"thead-dark\">\n          <tr>\n            <th width=\"25%\">Product Name</th>\n            <th width=\"15%\">Quantity</th>\n            <th width=\"10%\">Price</th>\n            <th width=\"15%\">Discount</th>\n            <th width=\"15%\">Summary</th>\n            <th width=\"15%\" className=\"noprint\"></th>\n          </tr>\n        </thead>\n        <tbody>\n          <ProductList prods={productData}\n          onProductChange={this.onProductChange}\n          onDeleted={this.deleteItem}\n          cartDiscount={cartDiscount}/>\n          <tr>\n            <td/>\n            <td/>\n            <td className=\"discount\"></td>\n            <td align=\"center\" >\n              <b>Cart Discount:</b>\n            </td>\n            <td>\n                <select className=\"form-control form-control-select\"\n                onChange={this.TotalDiscountChange} value={totalDiscount}>\n                        <option value=\"0\">0%</option>\n                        <option value=\"0.1\">10%</option>\n                        <option value=\"0.25\">25%</option>\n                    </select>\n                </td>\n                <td className=\"noprint\"></td>\n                <td className=\"noprint\"></td>\n          </tr>\n              <tr>\n                <td/>\n                <td/>\n                <td/>\n                <td align=\"right\">\n                  <b>Total:</b>\n                </td>\n                <td>\n                  {total}\n                </td>\n                <td className=\"noprint\"></td>\n            </tr>\n        </tbody>\n        </table>\n\n        <div className=\"noprint form-row\">    \n        <div className=\"col-md-8\"/>\n          <div className=\"col-md-4\">\n            <button className=\"btn btn-outline-secondary btn-md btn-block\" \n              onClick={() => window.print()}>\n              <i className=\"fa fa-print \"> Print</i>\n            </button>\n          </div>\n        </div>\n        \n\n      </div>\n    );\n  }\n}\n\n\n\nexport default App;\n\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App/App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\nserviceWorker.unregister();\n"],"sourceRoot":""}